安装
升级OpenSSL
yum -y uodate openssl openssl-libs

执行版本检测命令
openssl version

执行nginx安装命令
yum -y install nginx

执行版本检查
nginx -v

配置
修改nginx.conf配置
tee /usr/local/nginx/conf/nginx.conf <<-'EOF'
user nginx;
worker_processes 4;
error_log /data/log/nginx/error.log warn;
pid /var/run/nginx.pid;

events {
    worker_connections 1024
}

http {
    server_tokens off;
    include /etc/nginx/mime.types;
    default_type application/octet-stream;
    
    log_format main '$remote_addr[$http_x_forwarded_for] [$time_iso8601] "$request" '
                    '$status $body_types_sent "$http_referer" "$http_user_agent"';
    sendfile on;
    #tcp_nopush on;
    keepalive_timeout 65;
    gzip on;
    include /usr/local/nginx/conf/*.conf;  
}
EOF

修改default.conf
tee /usr/local/nginx/conf.d/default.conf <<-'EOF'
server {
    listen 80;
    server_name localhost;
    if ($time_iso8601 ~ "^(\d{4})-(\d{2})-(\d{2})T(\d{2})") {
        set $year $1;
        set $month $2;
        set $day $3;
        set $hour $4;
    }
    access_log /data/log/nginx/$year$month$day-$hour-access.log main;
    location ^~ /pub/ {
        add_header X-Frame-Options DENY;
        add_header X-Content-Type-Options nosniff;
    }
    location / {
        proxy_pass http://127.0.0.1;
        proxy_pass http://127.0.0.2;
    }
    root /var/www/html/;
}
EOF

修改index.html



